# ä¾èµ–

## ä¾èµ–å£°æ˜

ä¾èµ–é¡¹å¯ä»¥å£°æ˜åœ¨é¡¶å±‚rebar.configä¸­ï¼Œç”¨`rebar3 tree`å‘½ä»¤æ£€æŸ¥ã€‚

é€šå¸¸æƒ…å†µä¸‹ï¼Œrebar3æ”¯æŒä¸¤ç§ç±»å‹çš„ä¾èµ–ï¼š

* æºä¾èµ–ï¼ˆgitã€mercurialï¼‰
* åŒ…ä¾èµ–

ä¸¤ç§ç±»å‹çš„ä¾èµ–å·¥ä½œæ–¹å¼å¤§è‡´ç›¸åŒã€‚rebar3ä½¿ç”¨[hex.pm](https://hex.pm/)æä¾›ä¸€ä¸ªæ‰˜ç®¡é›†å’Œå®ƒä»¬çš„ä¾èµ–ï¼Œé€šå¸¸å®ƒä»¬é€Ÿåº¦æ›´å¿«ï¼ˆç”¨äº†CDNï¼‰ï¼Œèƒ½å¤Ÿä½œä¸ºé•œåƒï¼Œè¢«ç¼“å­˜åœ¨`~/.cache/rebar3/`ã€‚

æ‰€æœ‰çš„ä¾èµ–éƒ½ä¼šå­˜åˆ°æœ¬åœ°ã€‚è¿™æ˜¯é¿å…å…¨å±€åº“å‘ç”Ÿç‰ˆæœ¬å†²çªç­‰å¸¸è§é—®é¢˜çš„å¥½é€‰æ‹©ã€‚å®ƒè¿˜æœ‰åˆ©äºErlangçš„é€šç”¨å‘å¸ƒæœºåˆ¶ï¼Œæ„å»ºä¸€ä¸ªç‹¬ç«‹ç³»ç»Ÿã€‚

ä¾èµ–é€‚ç”¨ä»¥ä¸‹æ¯ç§æ ¼å¼ï¼š

```erlang
{deps,[
  %% åŒ…
  rebar,
  {rebar,"1.0.0"},
  {rebar, {pkg, rebar_fork}}, % ä¸åŒåŒ…åä¸‹çš„rebaråº”ç”¨
  {rebar, "1.0.0", {pkg, rebar_fork}},
  %% æºç ä¾èµ–
  {rebar, {git, "git://github.com/erlang/rebar3.git"}},
  {rebar, {git, "http://github.com/erlang/rebar3.git"}},
  {rebar, {git, "https://github.com/erlang/rebar3.git"}},
  {rebar, {git, "git@github.com:erlang/rebar3.git"}},
  {rebar, {hg, "https://othersite.com/erlang/rebar3"}},
  {rebar, {git, "git://github.com/erlang/rebar3.git", {ref, "aef728"}}},
  {rebar, {git, "git://github.com/erlang/rebar3.git", {branch, "master"}}},
  {rebar, {git, "git://github.com/erlang/rebar3.git", {tag, "3.0.0"}}},
  %% æºç å­ç›®å½•ä¾èµ– (git only), rebar 3.14ç‰ˆæœ¬ä»¥ä¸Š
  {rebar, {git_subdir, "git://github.com/erlang/rebar3.git", {branch, "main"}, "subdir"}},
  {rebar, {git_subdir, "git://github.com/erlang/rebar3.git", {tag, "3.14"}, "sub/dir"},
  {rebar, {git_subdir, "git://github.com/erlang/rebar3.git", {ref, "aeaefd"}, "dir"}
]}.
```

å¦‚ä»¥ä¸Šä¾‹å­ï¼Œå½“å‰ç‰ˆæœ¬ã€ä»…ç”¨åŒ…ã€gitæºç å’Œmercurialæºç éƒ½æ”¯æŒï¼Œå¯ä»¥é€šè¿‡[å®ç°èµ„æºè¡Œä¸º](https://www.rebar3.org/docs/custom-dep-resources)å¹¶å°†å…¶åƒæ’ä»¶ä¸€æ ·æ·»åŠ æ¥æ·»åŠ è‡ªå®šä¹‰ä¾èµ–é¡¹æº

## è¿è¡Œæ—¶ä¾èµ–

ç„¶è€Œï¼Œç”±Erlang / OTPè´Ÿè´£çš„ä»¥å¯åŠ¨å’Œå…³é—­åº”ç”¨ç¨‹åºï¼Œæ„å»ºå‘å¸ƒå’Œè„šæœ¬çš„å·¥å…·ï¼ˆåŒ…æ‹¬rebar3çš„ä¸€éƒ¨åˆ†ï¼‰çš„ä¾èµ–é¡¹å¤„ç†æ˜¯åŸºäºä¸€ä¸ªæ›´ç»†ç²’åº¦çš„ä¾èµ–å£°æ˜ï¼šåœ¨é¡¹ç›®ä¸­çš„æ¯ä¸ªåº”ç”¨ä¸­æŒ‡å®šå®ƒä»¬ä¾èµ–çš„åº”ç”¨ã€‚

æ‚¨åº”è¯¥åœ¨æ‚¨çš„appæˆ–app.srcæ–‡ä»¶ä¸­æ·»åŠ æ¯ä¸€ä¸ªä¾èµ–ï¼š

```erlang
{application, <APPNAME>,
 [{description, ""},
  {vsn, "<APPVSN>"},
  {registered, []},
  {modules, []},
  {applications, [kernel
                 ,stdlib
                 ,cowboy
                 ]},
  {mod, {<APPNAME>_app, []}},
  {env, []}
 ]}.
```

è¿™å°†å…è®¸ç¼–å†™å’Œç”Ÿæˆå„ç§ä¸ç›¸äº¤çš„åº”ç”¨ç¨‹åºå¯ä»¥å…±å­˜äºè™šæ‹Ÿæœºä¸­çš„è½¯ä»¶ï¼Œè€Œä¸å¿…å®Œå…¨ä¾èµ–rebar.configä¸­çš„ä¾èµ–å…³ç³»ã€‚æ¯”å¦‚è¯´ï¼Œæ‚¨å¯èƒ½æœŸæœ›æ‚¨çš„webæœåŠ¡å™¨ç‹¬ç«‹è¿è¡Œäºç®¡ç†å’Œdebugå·¥å…·ï¼Œå°½ç®¡äº§å“ä¸­ä¹Ÿéœ€è¦ç®¡ç†å’Œdebugå·¥å…·ã€‚

å¦‚æœéœ€è¦æ”¯æŒæ›´å¤šæ ¼å¼ï¼Œrebar3èƒ½å¤Ÿé€šè¿‡[`rebar_resource` behaviour](https://github.com/erlang/rebar3/blob/master/src/rebar_resource.erl)æ‰©å±•ï¼Œå‘é€[pullè¯·æ±‚](https://github.com/erlang/rebar3/blob/master/CONTRIBUTING.md)ç»™ç»´æŠ¤è€…ã€‚

> ### ğŸš§ä¾èµ–é¡¹ä¸é…ç½®é¡¹
>
> 
>
> ä¾èµ–é¡¹é€šå¸¸ä½¿ç”¨å®ƒä»¬é…ç½®ä¸­çš„prodé…ç½®ç¼–è¯‘ã€‚ æ²¡æœ‰å…¶å®ƒé…ç½® (å½“ç„¶é™¤äº† `default`)è¢«ä½¿ç”¨äºä¾èµ–ã€‚å³ä½¿å·²å°†å®ƒä»¬é…ç½®ä¸ºprodï¼Œä¾èµ–ä»å°†è¢«æ‹‰å–åˆ°åœ¨é¡¹ç›®å£°æ˜çš„é…ç½®æ–‡ä»¶çš„`<profile>`ç›®å½•ä¸­ã€‚ä¾‹å¦‚ï¼Œé¡¶å±‚`deps`é‡Œçš„ä¸€ä¸ªä¾èµ–ä¼šåœ¨ `_build/default/lib`ç›®å½•ä¸‹è€Œ `test`é…ç½®çš„ä¾èµ–ä¼šè¢«æ‹‰å–åˆ° `_build/test/lib`ï¼Œè€Œå®ƒä»¬éƒ½ä¼šç”¨å®ƒä»¬é…ç½®é‡Œçš„prodç¼–è¯‘ï¼ˆè¯‘æ³¨ï¼šä½†æ˜¯ä¸ä¼šåƒé¡¹ç›®ä¸€æ ·ç”Ÿæˆä¸€ä¸ªprodæ–‡ä»¶å¤¹ï¼‰ã€‚

## ä¾èµ–ç‰ˆæœ¬å¤„ç†

Rebar3è®¤ä¸ºä¾èµ–é¡¹ç‰ˆæœ¬ä»…ä¾›å‚è€ƒã€‚è€ƒè™‘åˆ°æ·»åŠ rebar3æ—¶Erlangç¤¾åŒºä¸­ç°æœ‰çš„å¼€æºç¯å¢ƒï¼Œè¯•å›¾å¼ºåŠ è¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶æˆ–ä»»ä½•å…¶ä»–ç±»ä¼¼æ–¹æ¡ˆè¢«è®¤ä¸ºæ˜¯ä¸åˆ‡å®é™…çš„ï¼š

* äººä»¬æ›´æ–°éƒ¨åˆ†ç‰ˆæœ¬è€Œä¸æ˜¯å…¨éƒ¨ï¼ˆgitæ ‡ç­¾ã€åˆ†æ”¯åã€OTPåº”ç”¨ç¨‹åºç‰ˆæœ¬ï¼‰è€Œå®ƒä»¬å¯èƒ½äº’ç›¸å†²çª
* æœ‰äº›äººä»ä¸æ›´æ–°ä»–ä»¬çš„ç‰ˆæœ¬å¹¶åœ¨å…¶ä¸‹å‘å¸ƒè¿‡å¤šæ¬¡
* å¹¶éæ¯ä¸ªäººéƒ½è®¢é˜…ç›¸åŒçš„ç‰ˆæœ¬æ–¹æ¡ˆ
* äººä»¬åœ¨è®¢é˜…è¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶ä¸­çŠ¯é”™è¯¯
* è®¸å¤šåº”ç”¨çš„ç‰ˆæœ¬å¡åœ¨å°äº1.0.0çš„é˜¶æ®µï¼Œè¢«è®¤ä¸ºæ˜¯ä¸€ç›´ä¸ç¨³å®šçš„ã€‚
* æºä¾èµ–å…³ç³»ç»å¸¸ä½¿ç”¨ï¼šå› æ­¤ï¼Œè¦å¼„æ¸…ç‰ˆæœ¬å†²çªï¼Œå°±éœ€è¦ä»æ‰€æœ‰ä¾èµ–é¡¹ä¸­ä¸‹è½½æ‰€æœ‰ä¼ é€’æ€§ä¾èµ–é¡¹ï¼Œä»¥ä¾¿æ¯æ¬¡éƒ½ç¡®å®šå®ƒä»¬æ˜¯å¦å†²çªï¼Œå¹¶ä¸”æˆæœ¬å¾ˆé«˜ã€‚
* ä¸¥æ ¼éµå®ˆè¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶æœ€ç»ˆä¼šå¯¼è‡´é”™è¯¯çš„å†²çªï¼Œå…¶ä¸­ä½¿ç”¨åœ¨ä¸»è¦ç‰ˆæœ¬ä¸­æœªæ›´æ”¹çš„APIå­é›†ä»ç„¶éœ€è¦æ‰‹åŠ¨è§£å†³å†²çªå’Œè¿›è¡Œä¾èµ–é¡¹å®¡æŸ¥

ä½œä¸ºæ›¿ä»£ï¼ŒRebar3ä¼š[æœ‰åºéå†](https://www.rebar3.org/docs/dependencies/#fetching-order)æ‹‰å–å’Œä¸‹è½½ä¾èµ–ã€‚è¿™æ„å‘³ç€æœ€æ¥è¿‘ä¾èµ–æ ‘çš„æ ¹çš„ä¾èµ–é¡¹ä¼šè¢«é€‰ä¸­ï¼Œè€Œä¸ç®¡å®ƒä»¬çš„ç‰ˆæœ¬ã€‚ä»»ä½•å£°æ˜åœ¨æ‚¨çš„rebar.configæ–‡ä»¶ä¸­çš„ä¾èµ–é¡¹æ°¸è¿œéƒ½ä¸ä¼šè¢«ä¸€ä¸ªé€’å½’ä¾èµ–ï¼ˆä¾èµ–çš„ä¾èµ–ï¼‰æ‰€è¦†ç›–ï¼Œè€Œé€’å½’ä¾èµ–æ°¸è¿œä¸ä¼šè¢«ä¸€ä¸ªåæ¥é‡åˆ°çš„æœ‰å†²çªçš„é€’å½’ä¾èµ–æ‰€è¦†ç›–ã€‚

è¿™æ„å‘³ç€å¦‚æœæ‚¨è¦ä¼˜å…ˆä½¿ç”¨ä¸€ä¸ªç‰ˆæœ¬ï¼Œæ‚¨å¯ä»¥å°†å…¶æ·»åŠ åˆ°rebar.configæ–‡ä»¶ä¸­ï¼Œç„¶åé€‰æ‹©è¦ä¿ç•™çš„éƒ¨åˆ†ï¼›è¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶æœ‰æ—¶éœ€è¦ç›¸åŒçš„å†²çªè§£å†³æœºåˆ¶ã€‚

åœ¨å®è·µä¸­ï¼Œè¿™å·²è¢«è¯æ˜æ˜¯ç»å¯¹è¶³å¤Ÿçš„ä¸€ç§æœºåˆ¶ã€‚

æ¯æ¬¡è¿è¡Œä¾èµ–é¡¹è·å–å’Œè§£æä¹‹åï¼Œæœ€ç»ˆä¾èµ–é¡¹åˆ—è¡¨å°†å†™å…¥rebar.lockæ–‡ä»¶ã€‚

> ### ğŸ“˜å°†å†²çªè§†ä¸ºé”™è¯¯
>
> å¦‚æœæ‚¨æƒ³è®©rebar3ä¸€æ£€æµ‹åˆ°å†²çªå°±ä¸­æ–­ï¼Œè€Œä¸æ˜¯è·³è¿‡è¯¥æ–‡ä»¶ç»§ç»­å¤„ç†ï¼Œåœ¨æ‚¨çš„rebar.configæ–‡ä»¶ä¸­æ·»åŠ ä¸€è¡Œï¼š`{deps_error_on_conflict, true}.` ã€‚

ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼ˆå’Œ [hex.pm](https://hex.pm)çš„åŸå› ï¼‰hexä¾èµ–é¡¹å¯ä»¥ç”¨semver-likeè¯­æ³•æŒ‡å®šï¼š

```erlang
{deps,[
  rebar,                   % æ‹‰å–å·²çŸ¥æœ€æ–°ç‰ˆæœ¬, å¿½ç•¥é¢„è§ˆç‰ˆ
  {rebar, "~> 2.0.0"},     % >= 2.0.0 and < 2.1.0`
  {rebar, "~> 2.1.2"},     % >= 2.1.2 and < 2.2.0`
  {rebar, "~> 2.1.3-dev"}` % >= 2.1.3-dev and < 2.2.0`
  {rebar, "~> 2.0"}`       % >= 2.0.0 and < 3.0.0`
  {rebar, "~> 2.1"}`       % >= 2.1.0 and < 3.0.0`
]}.
```

è¦è·å–åŒ…çš„æœ€æ–°å¯ç”¨ç‰ˆæœ¬ï¼Œå¯è°ƒç”¨ï¼š

```shell
$ rebar3 update
===> Updating package index...
```

è¦ä½¿ç”¨ä¸€ä¸ªéé»˜è®¤çš„CDNï¼Œæ¯”å¦‚æŸä¸ª[å®˜æ–¹é•œåƒ](https://hex.pm/docs/mirrors)ï¼Œå¦‚ä¸‹å°†å…¶æ·»åŠ åˆ°æ‚¨é¡¹ç›®ä¸­çš„rebar.configæ–‡ä»¶æˆ–è€…`~/.config/rebar3/rebar.config`:

```erlang
{rebar_packages_cdn, "https://s3-eu-west-1.amazonaws.com/s3-eu.hex.pm"}. 
```

## æ£€æŸ¥ä¾èµ–é¡¹

å¦‚æœæ‚¨å¸Œæœ›åªåœ¨æœ¬åœ°ä½¿ç”¨ï¼Œä¸è¦ç»å¸¸å‘å¸ƒæ–°ç‰ˆæœ¬çš„ä¾èµ–é¡¹ï¼Œæœ‰ä¸€ä¸ª`_checkouts`ç›®å½•æœºåˆ¶ï¼Œç®€å•åœ°å¼„ä¸ªè½¯è¿æ¥æˆ–è€…å°†æ‚¨çš„ä¾èµ–å¤åˆ¶åˆ°æ‚¨é¡¹ç›®é¡¶å±‚ç›®å½•çš„`_checkouts`ç›®å½•é‡Œï¼Œä»»ä½•åœ¨`_checkout`ç›®å½•ä¸­çš„åº”ç”¨æˆ–æ’ä»¶ä¼šä¼˜å…ˆäºåœ¨rebar.configé‡Œçš„depsã€pluginsã€æˆ–è€…project_pluginsåˆ—è¡¨ä¸­çš„åŒä¸€ä¸ªåº”ç”¨ï¼ŒåŒæ—¶è¿˜ä¼šè¦†ç›–ä»»ä½•å·²ç»æ‹‰å–åˆ°_buildä¸­çš„ã€‚

```
_checkouts
â””â”€â”€ depA
    â””â”€â”€ src
```



æ³¨æ„`_checkouts`æ˜¯ä¸€ä¸ªè¦†ç›–ï¼Œè¿™æ„å‘³ç€åœ¨rebar.configä¸­å¿…é¡»å­˜åœ¨å¯¹åº”çš„depæˆ–è€…pluginå£°æ˜å®ä½“ã€‚

## æ‹‰å–é¡ºåº

å¯¹äºå¸¸è§„çš„ä¾èµ–æ ‘ï¼Œå¦‚ï¼š

```
  A
 / \
B   C
```

ä¾èµ–é¡¹Aã€Bå’ŒCä¼šè¢«æ‹‰å–

ä½†æ˜¯ï¼Œæ›´å¤æ‚çš„ä¾èµ–æ ‘å¦‚ï¼ˆC1å’ŒC2ä¸ºCçš„ä¸¤ä¸ªä¸åŒç‰ˆæœ¬ï¼‰ï¼š

```
   A
 /   \
B    C1
|
C2
```

ä¾èµ–é¡¹Aã€Bå’ŒC1ä¼šè¢«æ‹‰å–ï¼Œå½“Rebar3é‡åˆ°C2ï¼Œå®ƒä¼šæ˜¾ç¤ºä¸€ä¸ªè­¦å‘Šï¼šè·³è¿‡C2ï¼ˆä»$æŒ‡å®šæº)ï¼Œå› ä¸ºä¸€ä¸ªç›¸åŒåå­—çš„appå·²ç»æ‹‰å–äº†ã€‚

è¿™æ ·çš„æ¶ˆæ¯èƒ½è®©ç”¨æˆ·çŸ¥é“å“ªä¸ªä¾èµ–é¡¹è¢«è·³è¿‡äº†ã€‚

æœ‰ä¸¤ä¸ªåå­—ç›¸åŒçš„é€’å½’ä¾èµ–åœ¨ä¾èµ–æ ‘çš„åŒä¸€å±‚çš„æƒ…å†µåˆæ€æ ·å‘¢ï¼Ÿ

```
   A
 /   \
B     C
|     |
D1    D2
```

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒD1ä¼šå–ä»£D2ï¼Œå› ä¸ºBçš„å­—å…¸åºåœ¨Cå‰é¢ï¼Œè¿™æ˜¯ä¸ªéšæ„å®šçš„è§„åˆ™ï¼Œä½†è‡³å°‘æ˜¯ä¸ªå¯ä»¥ç¡®ä¿é‡å¤é¡¹å”¯ä¸€æ€§çš„è§„åˆ™ã€‚

å¦‚æœç”¨æˆ·ä¸æƒ³è¦è¿™ç§è§„åˆ™çš„ç»“æœï¼Œä»–ä»¬å¯ä»¥å°†D2æ”¾åˆ°é¡¶å±‚çš„ä¾èµ–ä¸­ä¿è¯å®ƒå…ˆè¢«é€‰ä¸­ï¼š

```
   A      D2
 /   \
B     C
|     |
D1    D2
```

ç»“æœAã€Bã€Cå’ŒD2ä¼šè¢«æ‹‰å–ã€‚

Rebar3ä¼šä½¿ç”¨åŒæ ·çš„ç®—æ³•å¤„ç†åŒ…ï¼Œè€Œä¸”åœ¨æ£€æµ‹åˆ°å¾ªç¯ä¾èµ–çš„æ—¶å€™ä¼šé”™è¯¯é€€å‡ºã€‚

åœ¨`_checkouts`ç›®å½•ä¸‹çš„ä¾èµ–ä¼šä¿æŒåŸçŠ¶ï¼Œè¢«å½“ä½œä¸€ä¸ªé¡¶å±‚åº”ç”¨å¯¹å¾…ã€‚

## é”å®šæ–‡ä»¶

é”å®šæ–‡ä»¶ï¼ˆrebar.lockï¼‰æ˜¯å”¯ä¸€ä¸€ä¸ªrebar3ç”Ÿæˆåœ¨`_build`ç›®å½•ä¹‹å¤–çš„æ–‡ä»¶ã€‚å®ƒå¸¸ç”¨äºæºç æ§åˆ¶æ£€æŸ¥ã€‚é”å®šæ–‡ä»¶ä¸­åŒ…å«æœ‰å…³äºä»£ç ä¾èµ–çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬åƒgitä¸­çš„æºç ä¾èµ–é¡¹é‚£æ ·ä¸å˜çš„å¼•ç”¨ï¼Œä»¥åŠå•ç‹¬çš„å¸¦æœ‰å“ˆå¸Œå€¼çš„åŒ…çš„ç‰ˆæœ¬å·ï¼ˆç”¨æ¥é˜²æ­¢é•œåƒè¢«åŠ«æŒï¼‰

```erlang
{<<"mysql_poolboy">>,
  {git,"https://github.com/mysql-otp/mysql-otp-poolboy",
       {ref,"c35df65abcbd29a65b71193839ee977cea7b219f"}},
  0},
 {<<"poolboy">>,
  {git,"https://github.com/devinus/poolboy.git",
       {ref,"29be47db8c2be38b18c908e43a80ebb7b9b6116b"}},
  1}
```

ç›®çš„æ˜¯ä½¿ç”¨æ¯”æ‰¾åˆ°çš„ä¾èµ–é¡¹æ›´å‡†ç¡®çš„ä¿¡æ¯ï¼Œè€Œä¸æ˜¯é€šè¿‡é…ç½®æ–‡ä»¶è‡ªå·±è·å–çš„ä¾èµ–é¡¹ï¼Œä¾‹å¦‚ï¼Œå…è®¸å°†ä¾èµ–é¡¹é…ç½®ä¸ºä»mainæŒ‰éœ€æ›´æ–°ï¼Œä½†é”å®šåˆ°ç»è¿‡ç¨³å®šæµ‹è¯•çš„ç‰ˆæœ¬ï¼Œåªæœ‰åœ¨è§£é”æˆ–è€…æ›´æ–°çš„æ—¶å€™å…è®¸å®ƒè¢«æ›´æ¢æˆæ–°çš„æˆ–è€…ä¸åŒçš„ç‰ˆæœ¬ã€‚è¯¥æ–¹æ¡ˆå…è®¸é¡¹ç›®é‡å¤æ„å»ºï¼Œå³ä½¿æ˜¯gitæ ‡ç­¾æˆ–è€…åˆ†æ”¯è¢«æŸäººç ´åæ€§åœ°ç¯¡æ”¹äº†ã€‚

Rebar3è¿˜å°†åœ¨åˆ‡æ¢åˆ†æ”¯æˆ–è·å–å¯ä¼ é€’depæ—¶å°†é”å®šæ–‡ä»¶ç”¨ä½œä¾èµ–é¡¹çš„çœŸæ­£æˆæƒæºï¼ˆå¦‚æœæœ‰å¯ç”¨çš„è¯ï¼Œå®ƒå°†ä»é”å®šæ–‡ä»¶ä¸­é€‰æ‹©æ•°æ®ï¼‰ï¼Œè€Œä¸æ˜¯rebar.configæ–‡ä»¶ã€‚è¿™æ ·ï¼Œå½“åœ¨rebar.configæ–‡ä»¶ä¸­ä½¿ç”¨æ¾æ•£å¼•ç”¨æˆ–ç‰ˆæœ¬æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®‰å…¨æµ‹è¯•çŠ¶æ€å¸¦å…¥å…¶ä»–åº”ç”¨ç¨‹åºã€‚

è¯¥æ ¼å¼æœŸæœ›å‘å‰å’Œå‘åå…¼å®¹ï¼ŒRebar3å°†æ ¹æ®å­˜å‚¨çš„å…ƒæ•°æ®çš„æ ¼å¼æ³¨é‡Šé”å®šæ–‡ä»¶çš„ç‰ˆæœ¬ï¼Œå¹¶åœ¨ä½¿ç”¨æ—§ç‰ˆæœ¬çš„rebar3è¯»å–è¾ƒæ–°ç‰ˆæœ¬çš„é”å®šæ–‡ä»¶æ—¶å‘å‡ºè­¦å‘Šï¼Œè¿™å¯ä»¥å‘Šè¯‰ç”¨æˆ·ï¼Œé€šè¿‡ä½¿ç”¨è¾ƒæ—§çš„å·¥å…·å‰¯æœ¬ï¼ŒæŸäº›åœ¨ä»¥åè¢«è®¤ä¸ºé‡è¦çš„å…ƒæ•°æ®å°†ä¸¢å¤±ã€‚

## æ›´æ–°ä¾èµ–é¡¹

æ¯å½“è·å–å¹¶é”å®šä¾èµ–é¡¹æ—¶ï¼ŒRebar3éƒ½ä¼šä»æºæ–‡ä»¶ä¸­æå–å¼•ç”¨ä»¥å°†å…¶åŠæ—¶å›ºå®šåˆ°ç‰¹å®šç‰ˆæœ¬ã€‚åœ¨åç»­æ„å»ºä¸­ï¼Œåº”å¼ºåˆ¶ä¾èµ–é¡¹éµå¾ªè¯¥ç‰ˆæœ¬ã€‚

Rebar3å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼å°†ä»¥å‰å®‰è£…çš„ä¾èµ–é¡¹å‡çº§åˆ°è¾ƒæ–°ç‰ˆæœ¬ï¼šå°†åˆ†æ”¯åˆ‡æ¢åˆ°æœ€æ–°ç‰ˆï¼ˆæ¯”å¦‚ä¸€ä¸ªæ—§çš„mainåˆ†æ”¯æ›´æ–°åˆ°æ–°çš„mainçš„HEADæºæ–‡ä»¶ï¼Œæˆ–è€…æ²¡æœ‰ç‰¹æŒ‡æŸä¸€ä¸ªçš„åŒ…çš„æœ€æ–°ç‰ˆæœ¬ï¼‰ï¼Œæˆ–è€…åœ¨rebar.configæ–‡ä»¶ä¸­ç”¨æ–°ç‰ˆæœ¬æ ‡è®°æ¥æ›¿æ¢ç°æœ‰è¢«é”å®šçš„ä¾èµ–ã€‚

åœ¨ä¸‹é¢çš„ä¾èµ–æ ‘ï¼š

```
A  B
|  |
C  D
```

ç”¨æˆ·å¯ä»¥å•ä¸ªæ›´æ–°ï¼ˆä½¿ç”¨`rebar3 upgrade  A`æˆ–è€…`rebar3 upgrade B`ï¼‰æˆ–è€…ä¸€æ¬¡æ€§æ›´æ–°ï¼ˆ`rebar3 upgrade A,B`æˆ–è€…`rebar3 upgrade`æ›´æ–°å…¨éƒ¨ä¾èµ–ï¼‰

åªæ›´æ–°Aæ„å‘³ç€Aå’ŒCå¯èƒ½è¢«æ›´æ–°ï¼Œè€ŒBå’ŒDè¢«å¿½ç•¥ã€‚

å‡çº§ä¾èµ–é¡¹å¯èƒ½ä¼šäº§ç”Ÿä»¤äººæƒŠè®¶çš„æ•ˆæœå’Œæœ‰è¶£çš„æç«¯æƒ…å†µï¼Œè€ƒè™‘ä»¥ä¸‹çš„ä¾èµ–æ ‘ï¼š

```
    A       B       C1
   / \     / \     / \
  D   E   F   G   H   I2
  |   |
  J   K
  |
  I1
```

æ‹‰å–å®Œä»¥ä¸Šä¾èµ–æ ‘ï¼ŒI2ä¼šä¼˜å…ˆä¸I1ï¼Œå› ä¸ºå®ƒæ›´é è¿‘æ ¹ï¼Œç„¶è€Œï¼Œå½“C1æ›´æ–°ä¸ºC2ï¼Œè€ŒC2ä¸å†ä¾èµ–I2ã€‚rebar3ä¼šè‡ªåŠ¨æ‹‰å–Aæ ‘ä¸‹çš„I1ï¼ˆå°½ç®¡Aæ²¡æœ‰æ›´æ–°çš„éœ€æ±‚ï¼‰ä»¥ä¿æŠ¤æ–°ä¾èµ–æ ‘çš„æ­£ç¡®æ€§ã€‚æ›´æ–°åçš„æ ‘çœ‹èµ·æ¥å¦‚ï¼š

```
    A       B     C2
   / \     / \    |
  D   E   F   G   H
  |   |
  J   K
  |
  I1
```

å½“I2ä¸å†å­˜åœ¨äºé¡¹ç›®ä¸­ï¼ŒI1ä¾¿èµ·æ•ˆäº†ã€‚

è°ƒç”¨`rebar3 unlock`å°†ä¼šå®Œå…¨åˆ·æ–°é”å®šæ–‡ä»¶rebar.lockã€‚

æ‚¨å¯ä»¥æ‰‹åŠ¨æ£€æŸ¥rebar3ä¾èµ–æ ‘,æ˜¾ç¤ºå½“å‰ä¾èµ–æ ‘ï¼š

```shell
$ rebar3 tree
...
â”œâ”€ bootstrap-0.0.2 (git repo)
â”œâ”€ dirmon-0.1.0 (project app)
â”œâ”€ file_monitor-0.1 (git repo)
â”œâ”€ peeranha-0.1.0 (git repo)
â”‚  â”œâ”€ gproc-git (git repo)
â”‚  â”œâ”€ interclock-0.1.2 (git repo)
â”‚  â”‚  â”œâ”€ bitcask-1.7.0 (git repo)
â”‚  â”‚  â”‚  â””â”€ lager-2.1.1 (hex package)
â”‚  â”‚  â”‚     â””â”€ goldrush-0.1.6 (hex package)
â”‚  â”‚  â””â”€ itc-1.0.0 (git repo)
â”‚  â””â”€ merklet-1.0.0 (git repo)
â”œâ”€ recon-2.2.2 (git repo)
â””â”€ uuid-1.5.0 (git repo)
   â””â”€ quickrand-1.5.0 (git repo)

```

## Elixirä¾èµ–

ä»3.7.0ç‰ˆæœ¬å¼€å§‹ï¼Œrebar3æ”¯æŒElixirä¾èµ–ã€Elixirç‰ˆæœ¬1.7.4é€šè¿‡æ’ä»¶ä½¿ç”¨ï¼Œè¯·çœ‹[ç›¸å…³çš„æ’ä»¶éƒ¨åˆ†](https://www.rebar3.org/docs/plugins#elixir-dependencies)è·å–æ›´å¤šç»†èŠ‚ã€‚